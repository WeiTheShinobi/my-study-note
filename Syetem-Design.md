# Syetem Design

## 單體與微服務

微服務更加複雜，

而且需要額外的補助系統，

例如 log 來追蹤、服務發現、自動化等等，

服務間的網路溝通會略慢一些，



微服務的好處是：

不同服務可以使用不同的技術

更好部署

更好協作

> 單體和微服務的選擇取決於專案的大小與人力，
>
> 大型公司需要微服務．

## 服務間溝通

- 同步

每個服務都同步溝通，

需要應付很多場景，某個環節出錯很麻煩，

服務間緊密的耦合，

使用者要等待非常久的延遲．

- 非同步

服務非同步可以更快，

某些服務出錯時，我們沒辦法取消流程．

- 綜合方案

某些強制任務以同步方法執行ㄝ

除此之外都用非同步執行．

但還是有個問題，

如果服務請求失敗，

我們可能會丟失狀態．

可以加入消息對列．

- Message Queue

消息對列存儲非同步的請求，

保存請求的狀態，

出版者放入對列，

訂閱者從對列取出．

- Message Queue 的好處

提升穩定性，

更好擴展，而且擴展需要耗費的硬體更小，

減少系統的複雜性．因為少了連動性操作．

## 通訊協定

